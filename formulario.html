<!DOCTYPE html>
<html>
 <head>
  <title>Formulário</title>
  <link src="https://ajax.googleapis.com/ajax/libs/jqueremaily/3.1.0/jquery.min.js"> </link>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></link>
  <link src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></link>

  <script>
          function montarReq(){
                //document.getElementById("datanotificacao").value
                json="{'data1':["
                console.log("Novo data")
                i=0
                /*for (item of document.getElementsByClassName("datanotificacao")){
                    if(i==0){
                        json+="\'"+item.value+"\'"
                        console.log("laço "+ i + " concatenando "+item.value)
                    }
                        else {
                            json+=",\'"+item.value+"\'" 
                            console.log("laço "+ i + " concatenando "+","+item.value)}
                        
                        i+=1
                        
                }*/
               //identificacao do paciente
                json+="\'"+document.getElementById("datanotificacao").value+"\',"
                json+="\'"+document.getElementById("cartaosus").value+"\',"
                json+="\'"+document.getElementById("cpf").value+"\',"
                json+="\'"+document.getElementById("nomepaciente").value+"\',"
                json+="\'"+sexo.value+"\',"
                json+="\'"+document.getElementById("datanascimento").value+"\',"
                json+="\'"+document.getElementById("idade").value+"\',"
                json+="\'"+document.getElementById("nomemae").value+"\',"
                json+="\'"+document.getElementById("nacionalidade").value+"\',"
                json+="\'"+document.getElementById("paisresidencia").value+"\',"
                json+="\'"+document.getElementById("endereco").value+"\',"
                json+="\'"+document.getElementById("cep").value+"\',"

                //dados do caso
                //json+="\'"+document.getElementById("oi").value+"\',"
                //json+="\'"+document.getElementById("tchau").value+"\',"
                //json+="\'"+selectedItems+"\',"
                json+="\'"+hosp.value+"\',"
                json+="\'"+saudepaciente.value+"\',"
                json+="\'"+coleta.value+"\',"

                //dados de exposicao e viagens
                json+="\'"+viagem.value+"\',"
                json+="\'"+suspeito.value+"\',"
                json+="\'"+confirmado.value+"\',"
                json+="\'"+unidadesaude.value+"\',"
                json+="\'"+ocupacaosuspeito.value+"\',"
                json+="\'"+animais.value+"\',"
                
                //identificacao da unidade notificadora
                json+="\'"+document.getElementById("origemnotificacao").value+"\',"
                json+="\'"+document.getElementById("estadonotificacao").value+"\',"
                json+="\'"+document.getElementById("municipionotificacao").value+"\',"
                json+="\'"+document.getElementById("nomenotificador").value+"\',"
                json+="\'"+document.getElementById("profocup").value+"\',"
                json+="\'"+document.getElementById("telefone").value+"\',"
                json+="\'"+document.getElementById("email").value+"\'"

                json+="]}"
               
                //teste
               var sintomasitems=document.getElementsByName("sintomasapre");
               var sintomasselected="\n{'data2':[";
               var virgula1 = 0;
               for(var contador1=0; contador1<sintomasitems.length; contador1++){
                  
                  
                  if(sintomasitems[contador1].type=='checkbox' && sintomasitems[contador1].checked==true){
                     if(virgula1!=0){
                        sintomasselected+=",";
                     }else{
                        virgula1=1;
                     }
                     sintomasselected+= "\'" + sintomasitems[contador1].value + "\'";

                     
                  }
               }
               
               
               
               
               sintomasselected+="]}"
               sintomasfinal=sintomasselected;
               
               
               
               
               
               
               var sinaisitems=document.getElementsByName("sinaisclinicos");
               var sinaisselected="\n{'data3':[";
               var virgula2 = 0;
               for(var contador2=0; contador2<sinaisitems.length; contador2++){
                  
                  
                  if(sinaisitems[contador2].type=='checkbox' && sinaisitems[contador2].checked==true){
                     if(virgula2!= 0){
                       sinaisselected+=",";
                     }else{
                        virgula2 = 1;
                     }
                     sinaisselected+= "\'" + sinaisitems[contador2].value + "\'";
                  
                     
                  
                  
                  
                  }
               }
               sinaisselected+="]}"
               sinaisfinal=sinaisselected;
               
               
               
               
               
               
               
               var morbitems=document.getElementsByName("morbidade");
               var morbiselected="\n{'data4':[";
               var virgula3 = 0;
               for(var contador3=0; contador3 < morbitems.length; contador3++){
                  
                  
                  if(morbitems[contador3].type=='checkbox' && morbitems[contador3].checked==true){
                     if(virgula3 != 0){
                        morbiselected+=",";
                     }else{
                        virgula3 = 1;
                     }
                     morbiselected+= "\'" + morbitems[contador3].value + "\'";
                  
                  


                  }
               }
               

               
               morbiselected+="]}"
               morbfinal=morbiselected;
            
               



               var jsonf=json.concat(sintomasfinal,sinaisfinal,morbfinal);  
               console.log(jsonf)

                





                // montando req
                document.getElementById("req").value=json
                
         
          }

          function submeter(){
            alert("Formulário submetido");
          }
          


         function valorsexo(sexo){
               document.getElementById("sexo").value = sexo;
            }

         function valorhosp(hosp){
               document.getElementById("hosp").value = hosp;
            }
            
            function valorsituacao(saudepaciente){
               document.getElementById("saudepaciente").value = saudepaciente;
            }

            function valorcoleta(coleta){
               document.getElementById("coleta").value = coleta;
            }

            function valorviagem(viagem){
               document.getElementById("viagem").value = viagem;
            }

            function valorsuspeito(suspeito){
               document.getElementById("suspeito").value = suspeito;
            }

            function valorconfirmado(confirmado){
               document.getElementById("confirmado").value = confirmado;
            }

            function valorunidade(unidadesaude){
               document.getElementById("unidadesaude").value = unidadesaude;
            }

            function valorocupacao(ocupacaosuspeito){
               document.getElementById("ocupacaosuspeito").value = ocupacaosuspeito;
            }

            function valoranimal(animais){
               document.getElementById("animais").value = animais;
            }
            
            function morbidade(){
               var items=document.getElementsByName("morbidade");
               var selectedItems="{'data4':[";
               for(var i=0; i<items.length; i++){
                  if(items[i].type=='checkbox' && items[i].checked==true)
                     selectedItems+= ",\'" + items[i].value + "\'";
                  }
               selectedItems+="]}"
               selectedItems.value=itemfinal;
               console.log(itemfinal);
               }
  
  </script>
  
 </head>
 <body> 
  <br/>
  <div class="container">
   <h2 text-align="center">Protótipo Ficha de notificação para casos suspeitos e prováveis de Novo Coronavírus (2019-nCoV)</h2>
   <br/>
    <div class="col-md-6" style="margin:0 auto; float:none;"> 
     <h3 text-align="center">Identificação do paciente:</h3>
     <br/>

     <div class="form-group">
        <label>Data de notificação:</label>
        <input type="date" id="datanotificacao" class="form-control" placeholder="Ex:01/12/2000" />
     </div>
     
     <div class="form-group">
        <label>Número do cartão SUS (CNS):</label>
        <input type="number" id="cartaosus" name="cartaosus" class="form-control" placeholder="Ex:111222233334444"/>
     </div>

     <div class="form-group">
        <label>CPF:</label>
        <input type="number" id="cpf" name="cpf" class="form-control" placeholder="Ex:13616193761" />
     </div>

     <div class="form-group">
        <label>Nome completo do paciente:</label>
        <input type="text" id="nomepaciente" name="nomepaciente" class="form-control" placeholder="Ex:João da Silva" />
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>Sexo:
        <input type="radio" name="sexo" class="checkmark" onclick="valorsexo(this.value)" value="0"/>Masculino
        <input type="radio" name="sexo" class="checkmark" onclick="valorsexo(this.value)" value="1"/>Feminino
        </label>
        </ul>
        </label>
     </div>

     <div class="form-group">
        <label>Data de nascimento:</label>
        <input type="date" id="datanascimento" class="form-control" />
     </div>

     <div class="form-group">
        <label>Idade em anos:</label>
        <input type="number" id="idade" class="form-control" placeholder="Ex:25" />
     </div>

     <div class="form-group">
      <label>Nome da mãe:</label>
      <input type="text" id="nomemae" placeholder="Ex:Maria Rita" class="form-control" />
     </div>

     <div class="form-group">
      <label for="nacionalidade">Nacionalidade:</label>
      <select id="nacionalidade" id="nacionalidade" class="form-control">
        <option ></option>
        <option >Brasileiro</option>
        <option >Outro</option>
      </select>
     </div>

     <div class="form-group">
      <label for="paisresidencia">País de residência:</label>
      <select id="paisresidencia" id="paisresidencia" class="form-control">
        <option ></option>
        <option >Brasil</option>
        <option >Outro</option>
      </select>
     </div>

     <div class="form-group">
      <label>Endereço completo:</label>
      <input type="text" id="endereco" class="form-control" placeholder="Ex:Avenida das Rosas 676 Rio de Janeiro"  />
     </div>

     <div class="form-group">
      <label>CEP residência:</label>
      <input type="number" id="cep" class="form-control" placeholder="Ex:12345678"  />
     </div>

     <h3 text-align="center">Dados do caso</h3>

     <div class="form-group">
        <label>Data dos primeiros sintomas:</label>
        <input type="date" name="dataprimeirosintoma" class="form-control" value=""/>
     </div>

     <div class="form-group">

        <label>Selecione os sintomas apresentados</label><br>
        <input type="checkbox" name="sintomasapre" value="Febe"/>Febre<br>
        <input type="checkbox" name="sintomasapre" value="Tosse"/>Tosse<br>
        <input type="checkbox" name="sintomasapre" value="Dor de garganta"/>Dor de garganta<br>
        <input type="checkbox" name="sintomasapre" value="Dificuldade de respirar"/>Dificuldade de respirar<br>
        <input type="checkbox" name="sintomasapre" value="Mialgia/artralgia"/>Mialgia/artralgia<br>
        <input type="checkbox" name="sintomasapre" value="Diarreia"/>Diarreia<br>
        <input type="checkbox" name="sintomasapre" value="Náusea/vômitos"/>Náusea/vômitos<br>
        <input type="checkbox" name="sintomasapre" value="Cefaleia (dor de cabeça"/>Cefaleia (dor de cabeça)<br>
        <input type="checkbox" name="sintomasapre" value="Coriza"/>Coriza<br>
        <input type="checkbox" name="sintomasapre" value="Irritabilidade/confusão"/>Irritabilidade/confusão<br>
        <input type="checkbox" name="sintomasapre" value="Adinamia (fraqueza)"/>Adinamia (fraqueza)<br>
        <input type="checkbox" name="sintomasapre" value="Produção de escarro"/>Produção de escarro<br>
        <input type="checkbox" name="sintomasapre" value="Calafrios"/>Calafrios<br>
        <input type="checkbox" name="sintomasapre" value="Congestão nasal"/>Congestão nasal<br>
        <input type="checkbox" name="sintomasapre" value="Congestão conjuntival"/>Congestão conjuntival<br>
        <input type="checkbox" name="sintomasapre" value="Dificuldade para deglutir"/>Dificuldade para deglutir<br>
        <input type="checkbox" name="sintomasapre" value="Manchas vermelhas pelo corpo"/>Manchas vermelhas pelo corpo<br>
        <input type="checkbox" name="sintomasapre" value="Gânglios linfáticos aumentados"/>Gânglios linfáticos aumentados<br>
        <input type="checkbox" name="sintomasapre" value="Batimento das asas nasais"/>Batimento das asas nasais<br>
        <input type="checkbox" name="sintomasapre" value="Outros"/>Outros<br>
     </div>

     <div class="form-group">
        <label>Selecione os sinais clínicos observados</label><br>
        <input type="checkbox" name="sinaisclinicos" value="Febre"/>Febre<br>
        <input type="checkbox" name="sinaisclinicos" value="Exsudato faríngeo"/>Exsudato faríngeo<br>
        <input type="checkbox" name="sinaisclinicos" value="Convulsão"/>Convulsão<br>
        <input type="checkbox" name="sinaisclinicos" value="Conjuntivite"/>Conjuntivite<br>
        <input type="checkbox" name="sinaisclinicos" value="Coma"/>Coma<br>
        <input type="checkbox" name="sinaisclinicos" value="Dispneia/Taquipneia"/>Dispneia/Taquipneia<br>
        <input type="checkbox" name="sinaisclinicos" value="Alteração de ausculta pulmonar"/>Alteração de ausculta pulmonar<br>
        <input type="checkbox" name="sinaisclinicos" value="Alteração na radiologia de tórax"/>Alteração na radiologia de tórax<br>
        <input type="checkbox" name="sinaisclinicos" value="Outros"/>Outros<br>
     </div>

     <div class="form-group">
        <label>Morbidades prévias (selecionar todas morbidades pertinentes):</label><br>
        <input type="checkbox" name="morbidade" value="Doença cardiovascular, incluindo hipertensão"/>Doença cardiovascular, incluindo hipertensão<br>
        <input type="checkbox" name="morbidade" value="Diabetes"/>Diabetes<br>
        <input type="checkbox" name="morbidade" value="Doença hepática"/>Doença hepática<br>
        <input type="checkbox" name="morbidade" value="Doença neurológica crônica ou neuromuscular"/>Doença neurológica crônica ou neuromuscular<br>
        <input type="checkbox" name="morbidade" value="Imunodeficiência"/>Imunodeficiência<br>
        <input type="checkbox" name="morbidade" value="Infecção pelo HIV"/>Infecção pelo HIV<br>
        <input type="checkbox" name="morbidade" value="Doença renal"/>Doença renal<br>
        <input type="checkbox" name="morbidade" value="Doença pulmonar crônica"/>Doença pulmonar crônica<br>
        <input type="checkbox" name="morbidade" value="Neoplasia (tumor sólido ou hematológico)"/>Neoplasia (tumor sólido ou hematológico)<br>
      </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>Paciente foi hospitalizado?
        <input type="radio" name="hosp" onclick="valorhosp(this.value)" value="1"/>Sim
        <input type="radio" name="hosp" onclick="valorhosp(this.value)" value="0"/>Não
        <input type="radio" name="hosp" onclick="valorhosp(this.value)" value="2"/>Não sabe
        </label>
        </ul>
        <label>
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label >Situação de saúde do paciente no momento da notificação:<br>
        <input type="radio" name="saudepaciente" onclick="valorsituacao(this.value)" value="Óbito"/>Óbito<br>
        <input type="radio" name="saudepaciente" onclick="valorsituacao(this.value)" value="Cura"/>Cura<br>
        <input type="radio" name="saudepaciente" onclick="valorsituacao(this.value)" value="Sintomático"/>Sintomático<br>
        <input type="radio" name="saudepaciente" onclick="valorsituacao(this.value)" value="Ignorado"/>Ignorado<br>
        </label>
        </ul>
        </label>
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>Foi realizada coleta de amostra do paciente?
        <input type="radio" name="coleta" onclick="valorcoleta(this.value)" value="1"/>Sim
        <input type="radio" name="coleta" onclick="valorcoleta(this.value)" value="0"/>Não
        <input type="radio" name="coleta" onclick="valorcoleta(this.value)" value="2"/>Não sabe
        </label>
        </ul>
        </label>
     </div>

     <h3 text-align="center">Dados de exposição e viagens</h3>

     <div class="checkmark">
        <label>
        <ul>
        <label>Paciente tem histórico de viagem para fora do Brasil até 14 dias antes do início dos sintomas?<br>
        <input type="radio" name="viagem" onclick="valorviagem(this.value)" value="1"/>Sim
        <input type="radio" name="viagem" onclick="valorviagem(this.value)" value="0"/>Não
        <input type="radio" name="viagem" onclick="valorviagem(this.value)" value="2"/>Não sabe
        </label>
        </ul>
        </label>
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>O paciente teve contato próximo com uma pessoa que seja caso SUSPEITO de Novo Coronavírus (2019-nCoV)?<br>
        <input type="radio" name="suspeito" onclick="valorsuspeito(this.value)" value="1"/>Sim
        <input type="radio" name="suspeito" onclick="valorsuspeito(this.value)" value="0"/>Não
        <input type="radio" name="suspeito" onclick="valorsuspeito(this.value)" value="2"/>Não sabe
        </label>
        </ul>
        </label>
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>O paciente teve contato próximo com uma pessoa que seja caso CONFIRMADO de Novo Coronavírus (2019-nCoV)?<br>
        <input type="radio" name="confirmado" onclick="valorconfirmado(this.value)" value="1"/>Sim        
        <input type="radio" name="confirmado" onclick="valorconfirmado(this.value)" value="0"/>Não
        <input type="radio" name="confirmado" onclick="valorconfirmado(this.value)" value="2"/>Não sabe
        </label>
        </ul>
        </label>
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>Esteve em alguma unidade de saúde nos 14 dias antes do início dos sintomas?<br>
        <input type="radio" name="unidadesaude" onclick="valorunidade(this.value)" value="1"/>Sim 
        <input type="radio" name="unidadesaude" onclick="valorunidade(this.value)" value="0"/>Não
        <input type="radio" name="unidadesaude" onclick="valorunidade(this.value)" value="2"/>Não sabe
        </label>
        </ul>
        </label>
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>Ocupação do caso suspeito:</label><br>
        <input type="radio" name="ocupacaosuspeito" onclick="valorocupacao(this.value)" value="Profissional de saúde"/>Profissional de saúde<br>
        <input type="radio" name="ocupacaosuspeito" onclick="valorocupacao(this.value)" value="Estudante da área de saúde"/>Estudante da área de saúde<br>
        <input type="radio" name="ocupacaosuspeito" onclick="valorocupacao(this.value)" value="Profissional de laboratório"/>Profissional de laboratório<br>
        <input type="radio" name="ocupacaosuspeito" onclick="valorocupacao(this.value)" value="Trabalha em contato com animais"/>Trabalha em contato com animais<br> 
        <input type="radio" name="ocupacaosuspeito" onclick="valorocupacao(this.value)" value="Outros"/>Outros<br>
        </label>
        </ul>
        </label>
     </div>

     <div class="checkmark">
        <label>
        <ul>
        <label>Teve contato com animais em áreas afetadas?
        <input type="radio" name="animais" onclick="valoranimal(this.value)" value="1"/>Sim
        <input type="radio" name="animais" onclick="valoranimal(this.value)" value="0"/>Não
        <input type="radio" name="animais" onclick="valoranimal(this.value)" value="2"/>Não sabe
        </label>
        </ul>
        </label>
     </div>

     <h3 text-align="center">Identificação da unidade notificadora:</h3>

     <div class="form-group">
      <label for="origemnotificacao">Origem da notificação:</label>
      <select id="origemnotificacao" name="origemnotificacao" class="form-control">
        <option value=""></option>
        <option value="Secretaria Estadual de Saúde (vigilância)">Secretaria Estadual de Saúde (vigilância)</option>
        <option value="Secretaria Municipal de Saúde (vigilância)">Secretaria Municipal de Saúde (vigilância)</option>
        <option value="Serviço de saúde pública">Serviço de saúde pública</option>
        <option value="Serviço de saúde privada">Serviço de saúde privada</option>
        <option value="Profissional de saúde autônomo">Profissional de saúde autônomo</option>
        <option value="Laboratório público">Laboratório público</option>
        <option value="Laboratório privado">Laboratório privado</option>
        <option value="População">População</option>
        <option value="Outra">Outra</option>
      </select>
     </div>

     <div class="form-group">
      <label for="estadonotificacao">Estado de notificação (UF)?</label>
      <select id="estadonotificacao" name="estadonotificacao" class="form-control">
        <option value=""></option>
        <option value="AC">AC</option>
        <option value="AL">AL</option>
        <option value="AM">AM</option>
        <option value="AP">AP</option>
        <option value="BA">BA</option>
        <option value="CE">CE</option>
        <option value="DF">DF</option>
        <option value="ES">ES</option>
        <option value="GO">GO</option>
        <option value="MA">MA</option>
        <option value="MG">MG</option>
        <option value="MS">MS</option>
        <option value="MT">MT</option>
        <option value="PA">PA</option>
        <option value="PB">PB</option>
        <option value="PE">PE</option>
        <option value="PI">PI</option>
        <option value="PR">PR</option>
        <option value="RJ">RJ</option>
        <option value="RN">RN</option>
        <option value="RO">RO</option>
        <option value="RR">RR</option>
        <option value="RS">RS</option>
        <option value="SC">SC</option>
        <option value="SE">SE</option>
        <option value="SP">SP</option>
        <option value="TO">TO</option>
      </select>
     </div>

     <div class="form-group">
      <label>Município de notificação</label>
      <input type="text" id="municipionotificacao" class="form-control" placeholder="Ex:Rio de Janeiro" value="" />
     </div>

     <div class="form-group">
      <label>Nome do notificador:</label>
      <input type="text" id="nomenotificador" class="form-control" placeholder="Ex:Maria Helena Soares" value="" />
     </div>

     <div class="form-group">
      <label>Profissão ou ocupação:</label>
      <input type="text" id="profocup" class="form-control" placeholder="Ex:Engenheiro civil" value="" />
     </div>

     <div class="form-group">
      <label>Telefone de contato do notificador/unidade notificante:</label>
      <input type="tel" id="telefone" class="form-control" placeholder="Ex:21987654321" pattern="[0-9]{2}[0-9]{5}[0-9]{4}" value="" />
     </div>

     <div class="form-group">
      <label>E-mail do notificador/unidade notificadora:</label>
      <input type="email" id="email" class="form-control" placeholder="Ex:ricardomarques@gmail.com" value="" />
     </div>


     <form method="post" action="/bubu">
        <input type="hidden" name= "req" id="req" value="null">
        <input type="hidden" name="req" id="sexo">
        <input type="hidden" name="req" id="hosp">
        <input type="hidden" name="req" id="saudepaciente">
        <input type="hidden" name="req" id="coleta">
        <input type="hidden" name="req" id="viagem">
        <input type="hidden" name="req" id="suspeito">
        <input type="hidden" name="req" id="confirmado">
        <input type="hidden" name="req" id="unidadesaude">
        <input type="hidden" name="req" id="ocupacaosuspeito">
        <input type="hidden" name="req" id="animais">
        <input type="hidden" name="req" id="morbidade">
        <input type="hidden" name="req" id="selectedItems">
        <div class="form-group" text-align="center">
            <input type="button" class="btn btn-info" value="Preparar" onclick="montarReq()"/> 
            <input type="submit" name="submit" class="btn btn-info" value="Submeter" onclick="submeter()" />
        </div>
     </form>
     
   </div>
  </div>
 </body>
</html>